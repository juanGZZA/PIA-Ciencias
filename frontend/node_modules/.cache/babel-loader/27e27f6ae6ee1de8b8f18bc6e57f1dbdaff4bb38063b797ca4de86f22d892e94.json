{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\juanp\\\\OneDrive\\\\Escritorio\\\\PIA-Ciencias\\\\frontend\\\\src\\\\pages\\\\Products.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { getProducts, createProduct, updateProduct, deleteProduct } from '../services/api';\nimport { useSelector } from 'react-redux';\nimport { selectCurrentUser } from '../redux/slices/authSlice';\nimport Typography from '@mui/material/Typography';\nimport Box from '@mui/material/Box';\nimport Button from '@mui/material/Button';\nimport Grid from '@mui/material/Grid';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport CardActions from '@mui/material/CardActions';\nimport CardMedia from '@mui/material/CardMedia';\nimport Stack from '@mui/material/Stack';\nimport Chip from '@mui/material/Chip';\nimport IconButton from '@mui/material/IconButton';\nimport ImageList from '@mui/material/ImageList';\nimport ImageListItem from '@mui/material/ImageListItem';\nimport CloseIcon from '@mui/icons-material/Close';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogActions from '@mui/material/DialogActions';\nimport TextField from '@mui/material/TextField';\nimport Snackbar from '@mui/material/Snackbar';\nimport Alert from '@mui/material/Alert';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Products() {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [open, setOpen] = useState(false);\n  const [editingProduct, setEditingProduct] = useState(null);\n  const [form, setForm] = useState({\n    name: '',\n    description: '',\n    price: '',\n    stock: '',\n    category: '',\n    sku: '',\n    barcode: ''\n  });\n  const [imageFiles, setImageFiles] = useState([]);\n  const [imagePreviews, setImagePreviews] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const user = useSelector(selectCurrentUser);\n  const fetchProducts = async () => {\n    try {\n      const res = await getProducts();\n      setProducts(res.data || []);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n  useEffect(() => {\n    let mounted = true;\n    if (mounted) fetchProducts();\n    return () => {\n      mounted = false;\n    };\n  }, []);\n  const openForm = () => {\n    setEditingProduct(null);\n    setForm({\n      name: '',\n      description: '',\n      price: '',\n      stock: '',\n      category: '',\n      sku: '',\n      barcode: ''\n    });\n    setError(null);\n    setImageFiles([]);\n    setImagePreviews([]);\n    setOpen(true);\n  };\n  const closeForm = () => {\n    setOpen(false);\n  };\n  const handleChange = key => e => {\n    setForm(prev => ({\n      ...prev,\n      [key]: e.target.value\n    }));\n  };\n  const handleCreate = async () => {\n    setError(null);\n    if (!form.name) return setError('Name is required');\n    const price = parseFloat(form.price || 0);\n    const stock = parseInt(form.stock || 0, 10);\n    if (isNaN(price) || price < 0) return setError('Price must be a non-negative number');\n    if (isNaN(stock) || stock < 0) return setError('Stock must be a non-negative integer');\n    setLoading(true);\n    try {\n      const payload = {\n        name: form.name,\n        description: form.description,\n        price,\n        stock,\n        category: form.category,\n        sku: form.sku,\n        barcode: form.barcode\n      };\n      // include base64 images if any\n      if (imagePreviews.length) {\n        payload.images = imagePreviews; // already base64 strings\n      }\n      if (editingProduct) {\n        const res = await updateProduct(editingProduct.id || editingProduct._id, payload);\n        const updated = res.data;\n        setProducts(prev => prev.map(p => p.id === updated.id || p._id === updated.id ? updated : p));\n        setSuccess('Product updated');\n      } else {\n        const res = await createProduct(payload);\n        const created = res.data;\n        setProducts(prev => [created, ...prev]);\n        setSuccess('Product created');\n      }\n      closeForm();\n    } catch (err) {\n      var _err$response, _err$response$data;\n      const msg = ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || err.message || 'Create failed';\n      setError(msg);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleEditOpen = product => {\n    setEditingProduct(product);\n    setForm({\n      name: product.name || '',\n      description: product.description || '',\n      price: product.price || '',\n      stock: product.stock || '',\n      category: product.category || '',\n      sku: product.sku || '',\n      barcode: product.barcode || ''\n    });\n    setImagePreviews(product.images ? [...product.images] : []);\n    setImageFiles([]);\n    setError(null);\n    setOpen(true);\n  };\n  const handleDelete = async product => {\n    const ok = window.confirm(`Eliminar producto \"${product.name}\"?`);\n    if (!ok) return;\n    try {\n      await deleteProduct(product.id || product._id);\n      setProducts(prev => prev.filter(p => p.id !== product.id && p._id !== product.id));\n      setSuccess('Product deleted');\n    } catch (e) {\n      setError('Delete failed');\n    }\n  };\n  const handleFiles = files => {\n    const arr = Array.from(files || []);\n    setImageFiles(arr);\n    const readers = arr.map(file => new Promise(resolve => {\n      const reader = new FileReader();\n      reader.onload = e => resolve(e.target.result);\n      reader.readAsDataURL(file);\n    }));\n    Promise.all(readers).then(results => setImagePreviews(results));\n  };\n  const removePreview = index => {\n    setImagePreviews(prev => prev.filter((_, i) => i !== index));\n    setImageFiles(prev => prev.filter((_, i) => i !== index));\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: [/*#__PURE__*/_jsxDEV(Stack, {\n      direction: \"row\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        children: \"Products\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this), (user === null || user === void 0 ? void 0 : user.role) === 'admin' && /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        sx: {\n          mt: 2\n        },\n        onClick: openForm,\n        children: \"New Product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 2,\n      sx: {\n        mt: 2\n      },\n      children: products.map(p => /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        sm: 6,\n        md: 4,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          children: [p.images && p.images.length ? /*#__PURE__*/_jsxDEV(CardMedia, {\n            component: \"img\",\n            height: \"160\",\n            image: p.images[0],\n            alt: p.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              height: 160,\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              bgcolor: 'grey.100'\n            },\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              color: \"text.secondary\",\n              children: \"No image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(Stack, {\n              direction: \"row\",\n              justifyContent: \"space-between\",\n              alignItems: \"center\",\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                children: p.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Chip, {\n                label: `$${p.price}`,\n                color: \"primary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"text.secondary\",\n              sx: {\n                mt: 1\n              },\n              children: p.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"caption\",\n              sx: {\n                display: 'block',\n                mt: 1\n              },\n              children: [\"Stock: \", p.stock]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              size: \"small\",\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              size: \"small\",\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 13\n        }, this)\n      }, p.id || p._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: open,\n      onClose: closeForm,\n      maxWidth: \"sm\",\n      fullWidth: true,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: \"New Product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"Name\",\n          margin: \"normal\",\n          value: form.name,\n          onChange: handleChange('name')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"Description\",\n          margin: \"normal\",\n          value: form.description,\n          onChange: handleChange('description')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"Price\",\n          margin: \"normal\",\n          value: form.price,\n          onChange: handleChange('price'),\n          type: \"number\",\n          inputProps: {\n            step: '0.01'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"Stock\",\n          margin: \"normal\",\n          value: form.stock,\n          onChange: handleChange('stock'),\n          type: \"number\",\n          inputProps: {\n            step: '1'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"Category\",\n          margin: \"normal\",\n          value: form.category,\n          onChange: handleChange('category')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"SKU\",\n          margin: \"normal\",\n          value: form.sku,\n          onChange: handleChange('sku')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"Barcode\",\n          margin: \"normal\",\n          value: form.barcode,\n          onChange: handleChange('barcode')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"product-images\",\n            type: \"file\",\n            accept: \"image/*\",\n            multiple: true,\n            onChange: e => handleFiles(e.target.files),\n            style: {\n              display: 'block',\n              marginTop: 8\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this), imagePreviews.length > 0 && /*#__PURE__*/_jsxDEV(ImageList, {\n            cols: 4,\n            rowHeight: 80,\n            sx: {\n              mt: 1\n            },\n            children: imagePreviews.map((src, idx) => /*#__PURE__*/_jsxDEV(ImageListItem, {\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: src,\n                alt: `preview-${idx}`,\n                loading: \"lazy\",\n                style: {\n                  width: '100%',\n                  height: '100%',\n                  objectFit: 'cover'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                size: \"small\",\n                onClick: () => removePreview(idx),\n                sx: {\n                  position: 'absolute',\n                  top: 2,\n                  right: 2,\n                  bgcolor: 'rgba(0,0,0,0.4)',\n                  color: '#fff'\n                },\n                children: /*#__PURE__*/_jsxDEV(CloseIcon, {\n                  fontSize: \"small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 21\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(Typography, {\n          color: \"error\",\n          sx: {\n            mt: 1\n          },\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: closeForm,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleCreate,\n          disabled: loading,\n          variant: \"contained\",\n          children: \"Create\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: !!success,\n      autoHideDuration: 3000,\n      onClose: () => setSuccess(null),\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"success\",\n        onClose: () => setSuccess(null),\n        sx: {\n          width: '100%'\n        },\n        children: success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 161,\n    columnNumber: 5\n  }, this);\n}\n_s(Products, \"bY7jZruwjLXCem2WE9QQqrPCSrY=\", false, function () {\n  return [useSelector];\n});\n_c = Products;\nvar _c;\n$RefreshReg$(_c, \"Products\");","map":{"version":3,"names":["React","useEffect","useState","getProducts","createProduct","updateProduct","deleteProduct","useSelector","selectCurrentUser","Typography","Box","Button","Grid","Card","CardContent","CardActions","CardMedia","Stack","Chip","IconButton","ImageList","ImageListItem","CloseIcon","EditIcon","DeleteIcon","Dialog","DialogTitle","DialogContent","DialogActions","TextField","Snackbar","Alert","jsxDEV","_jsxDEV","Products","_s","products","setProducts","open","setOpen","editingProduct","setEditingProduct","form","setForm","name","description","price","stock","category","sku","barcode","imageFiles","setImageFiles","imagePreviews","setImagePreviews","loading","setLoading","error","setError","success","setSuccess","user","fetchProducts","res","data","e","console","mounted","openForm","closeForm","handleChange","key","prev","target","value","handleCreate","parseFloat","parseInt","isNaN","payload","length","images","id","_id","updated","map","p","created","err","_err$response","_err$response$data","msg","response","message","handleEditOpen","product","handleDelete","ok","window","confirm","filter","handleFiles","files","arr","Array","from","readers","file","Promise","resolve","reader","FileReader","onload","result","readAsDataURL","all","then","results","removePreview","index","_","i","children","direction","justifyContent","alignItems","variant","fileName","_jsxFileName","lineNumber","columnNumber","role","sx","mt","onClick","container","spacing","item","xs","sm","md","component","height","image","alt","display","bgcolor","color","label","size","onClose","maxWidth","fullWidth","margin","onChange","type","inputProps","step","accept","multiple","style","marginTop","cols","rowHeight","src","idx","width","objectFit","position","top","right","fontSize","disabled","autoHideDuration","severity","_c","$RefreshReg$"],"sources":["C:/Users/juanp/OneDrive/Escritorio/PIA-Ciencias/frontend/src/pages/Products.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { getProducts, createProduct, updateProduct, deleteProduct } from '../services/api';\r\nimport { useSelector } from 'react-redux';\r\nimport { selectCurrentUser } from '../redux/slices/authSlice';\r\nimport Typography from '@mui/material/Typography';\r\nimport Box from '@mui/material/Box';\r\nimport Button from '@mui/material/Button';\r\nimport Grid from '@mui/material/Grid';\r\nimport Card from '@mui/material/Card';\r\nimport CardContent from '@mui/material/CardContent';\r\nimport CardActions from '@mui/material/CardActions';\r\nimport CardMedia from '@mui/material/CardMedia';\r\nimport Stack from '@mui/material/Stack';\r\nimport Chip from '@mui/material/Chip';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport ImageList from '@mui/material/ImageList';\r\nimport ImageListItem from '@mui/material/ImageListItem';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport EditIcon from '@mui/icons-material/Edit';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport TextField from '@mui/material/TextField';\r\nimport Snackbar from '@mui/material/Snackbar';\r\nimport Alert from '@mui/material/Alert';\r\n\r\nexport default function Products() {\r\n  const [products, setProducts] = useState([]);\r\n  const [open, setOpen] = useState(false);\r\n  const [editingProduct, setEditingProduct] = useState(null);\r\n  const [form, setForm] = useState({ name: '', description: '', price: '', stock: '', category: '', sku: '', barcode: '' });\r\n  const [imageFiles, setImageFiles] = useState([]);\r\n  const [imagePreviews, setImagePreviews] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n  const user = useSelector(selectCurrentUser);\r\n\r\n  const fetchProducts = async () => {\r\n    try {\r\n      const res = await getProducts();\r\n      setProducts(res.data || []);\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    if (mounted) fetchProducts();\r\n    return () => { mounted = false; };\r\n  }, []);\r\n\r\n  const openForm = () => {\r\n    setEditingProduct(null);\r\n    setForm({ name: '', description: '', price: '', stock: '', category: '', sku: '', barcode: '' });\r\n    setError(null);\r\n    setImageFiles([]);\r\n    setImagePreviews([]);\r\n    setOpen(true);\r\n  };\r\n\r\n  const closeForm = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleChange = (key) => (e) => {\r\n    setForm(prev => ({ ...prev, [key]: e.target.value }));\r\n  };\r\n\r\n  const handleCreate = async () => {\r\n    setError(null);\r\n    if (!form.name) return setError('Name is required');\r\n    const price = parseFloat(form.price || 0);\r\n    const stock = parseInt(form.stock || 0, 10);\r\n    if (isNaN(price) || price < 0) return setError('Price must be a non-negative number');\r\n    if (isNaN(stock) || stock < 0) return setError('Stock must be a non-negative integer');\r\n    setLoading(true);\r\n    try {\r\n      const payload = {\r\n        name: form.name,\r\n        description: form.description,\r\n        price,\r\n        stock,\r\n        category: form.category,\r\n        sku: form.sku,\r\n        barcode: form.barcode\r\n      };\r\n      // include base64 images if any\r\n      if (imagePreviews.length) {\r\n        payload.images = imagePreviews; // already base64 strings\r\n      }\r\n      if (editingProduct) {\r\n        const res = await updateProduct(editingProduct.id || editingProduct._id, payload);\r\n        const updated = res.data;\r\n        setProducts(prev => prev.map(p => (p.id === updated.id || p._id === updated.id ? updated : p)));\r\n        setSuccess('Product updated');\r\n      } else {\r\n        const res = await createProduct(payload);\r\n        const created = res.data;\r\n        setProducts(prev => [created, ...prev]);\r\n        setSuccess('Product created');\r\n      }\r\n      closeForm();\r\n    } catch (err) {\r\n      const msg = err.response?.data?.error || err.message || 'Create failed';\r\n      setError(msg);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleEditOpen = (product) => {\r\n    setEditingProduct(product);\r\n    setForm({\r\n      name: product.name || '',\r\n      description: product.description || '',\r\n      price: product.price || '',\r\n      stock: product.stock || '',\r\n      category: product.category || '',\r\n      sku: product.sku || '',\r\n      barcode: product.barcode || ''\r\n    });\r\n    setImagePreviews(product.images ? [...product.images] : []);\r\n    setImageFiles([]);\r\n    setError(null);\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleDelete = async (product) => {\r\n    const ok = window.confirm(`Eliminar producto \"${product.name}\"?`);\r\n    if (!ok) return;\r\n    try {\r\n      await deleteProduct(product.id || product._id);\r\n      setProducts(prev => prev.filter(p => p.id !== product.id && p._id !== product.id));\r\n      setSuccess('Product deleted');\r\n    } catch (e) {\r\n      setError('Delete failed');\r\n    }\r\n  };\r\n\r\n  const handleFiles = (files) => {\r\n    const arr = Array.from(files || []);\r\n    setImageFiles(arr);\r\n    const readers = arr.map(file => new Promise((resolve) => {\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => resolve(e.target.result);\r\n      reader.readAsDataURL(file);\r\n    }));\r\n    Promise.all(readers).then(results => setImagePreviews(results));\r\n  };\r\n\r\n  const removePreview = (index) => {\r\n    setImagePreviews(prev => prev.filter((_, i) => i !== index));\r\n    setImageFiles(prev => prev.filter((_, i) => i !== index));\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\r\n        <Typography variant=\"h4\">Products</Typography>\r\n        {user?.role === 'admin' && (\r\n          <Button variant=\"contained\" sx={{ mt: 2 }} onClick={openForm}>New Product</Button>\r\n        )}\r\n      </Stack>\r\n\r\n      <Grid container spacing={2} sx={{ mt: 2 }}>\r\n        {products.map(p => (\r\n          <Grid item xs={12} sm={6} md={4} key={p.id || p._id}>\r\n            <Card>\r\n              {p.images && p.images.length ? (\r\n                <CardMedia component=\"img\" height=\"160\" image={p.images[0]} alt={p.name} />\r\n              ) : (\r\n                <Box sx={{ height: 160, display: 'flex', alignItems: 'center', justifyContent: 'center', bgcolor: 'grey.100' }}>\r\n                  <Typography color=\"text.secondary\">No image</Typography>\r\n                </Box>\r\n              )}\r\n              <CardContent>\r\n                <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\r\n                  <Typography variant=\"h6\">{p.name}</Typography>\r\n                  <Chip label={`$${p.price}`} color=\"primary\" />\r\n                </Stack>\r\n                <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>{p.description}</Typography>\r\n                <Typography variant=\"caption\" sx={{ display: 'block', mt: 1 }}>Stock: {p.stock}</Typography>\r\n              </CardContent>\r\n              <CardActions>\r\n                <Button size=\"small\">Edit</Button>\r\n                <Button size=\"small\">Delete</Button>\r\n              </CardActions>\r\n            </Card>\r\n          </Grid>\r\n        ))}\r\n      </Grid>\r\n\r\n      <Dialog open={open} onClose={closeForm} maxWidth=\"sm\" fullWidth>\r\n        <DialogTitle>New Product</DialogTitle>\r\n        <DialogContent>\r\n          <TextField fullWidth label=\"Name\" margin=\"normal\" value={form.name} onChange={handleChange('name')} />\r\n          <TextField fullWidth label=\"Description\" margin=\"normal\" value={form.description} onChange={handleChange('description')} />\r\n          <TextField fullWidth label=\"Price\" margin=\"normal\" value={form.price} onChange={handleChange('price')} type=\"number\" inputProps={{ step: '0.01' }} />\r\n          <TextField fullWidth label=\"Stock\" margin=\"normal\" value={form.stock} onChange={handleChange('stock')} type=\"number\" inputProps={{ step: '1' }} />\r\n          <TextField fullWidth label=\"Category\" margin=\"normal\" value={form.category} onChange={handleChange('category')} />\r\n          <TextField fullWidth label=\"SKU\" margin=\"normal\" value={form.sku} onChange={handleChange('sku')} />\r\n          <TextField fullWidth label=\"Barcode\" margin=\"normal\" value={form.barcode} onChange={handleChange('barcode')} />\r\n          <Box sx={{ mt: 2 }}>\r\n            <input\r\n              id=\"product-images\"\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              multiple\r\n              onChange={(e) => handleFiles(e.target.files)}\r\n              style={{ display: 'block', marginTop: 8 }}\r\n            />\r\n            {imagePreviews.length > 0 && (\r\n              <ImageList cols={4} rowHeight={80} sx={{ mt: 1 }}>\r\n                {imagePreviews.map((src, idx) => (\r\n                  <ImageListItem key={idx}>\r\n                    <img src={src} alt={`preview-${idx}`} loading=\"lazy\" style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n                    <IconButton size=\"small\" onClick={() => removePreview(idx)} sx={{ position: 'absolute', top: 2, right: 2, bgcolor: 'rgba(0,0,0,0.4)', color: '#fff' }}>\r\n                      <CloseIcon fontSize=\"small\" />\r\n                    </IconButton>\r\n                  </ImageListItem>\r\n                ))}\r\n              </ImageList>\r\n            )}\r\n          </Box>\r\n          {error && <Typography color=\"error\" sx={{ mt: 1 }}>{error}</Typography>}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={closeForm}>Cancel</Button>\r\n          <Button onClick={handleCreate} disabled={loading} variant=\"contained\">Create</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      <Snackbar open={!!success} autoHideDuration={3000} onClose={() => setSuccess(null)}>\r\n        <Alert severity=\"success\" onClose={() => setSuccess(null)} sx={{ width: '100%' }}>{success}</Alert>\r\n      </Snackbar>\r\n    </Box>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}